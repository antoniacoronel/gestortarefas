// Testes com Jest
const GerenciadorTarefas = require("./GerenciadorTarefas");

describe("Gerenciador de Tarefas", () => {
    let gerenciador;

    beforeEach(() => {
        gerenciador = new GerenciadorTarefas();
    });

    test("Deve adicionar uma nova tarefa", () => {
        const tarefa = gerenciador.adicionarTarefa("Estudar Jest");
        expect(tarefa).toEqual({ id: 1, descricao: "Estudar Jest", concluida: false });
        expect(gerenciador.obterTarefas()).toHaveLength(1);
    });

    test("Deve lançar erro ao adicionar tarefa sem descrição", () => {
        expect(() => gerenciador.adicionarTarefa("")).toThrow("Descrição é obrigatória");
    });

    test("Deve remover uma tarefa existente", () => {
        gerenciador.adicionarTarefa("Fazer compras");
        const removida = gerenciador.removerTarefa(1);
        expect(removida.descricao).toBe("Fazer compras");
        expect(gerenciador.obterTarefas()).toHaveLength(0);
    });

    test("Deve lançar erro ao remover tarefa inexistente", () => {
        expect(() => gerenciador.removerTarefa(99)).toThrow("Tarefa não encontrada");
    });

    test("Deve alternar o status de uma tarefa", () => {
        gerenciador.adicionarTarefa("Aprender Node.js");
        const tarefa = gerenciador.alternarTarefa(1);
        expect(tarefa.concluida).toBe(true);
    });
});
